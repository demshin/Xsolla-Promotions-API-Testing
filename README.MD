# Тестовое задание Xsolla

Протестировать Xsolla Promotions API

1. Изучить [документацию](http://developers.xsolla.com/api.html#promotions) и написать тест план.
2. Выбрать инструмент для написания тестов. Выбор нужно обосновать.
3. Написать работающие тесты.
4. Составить список ошибок, замечаний, пожеланий к API.

## Реквизиты для тестов
|поле|значение|
|---|---|
|merchant_id|22174|
|project_id|15861|
|api_key|O8bS0aZNZbKuiONw|
|payment_systems.id|2682|
|packages|1|


## Тест-план
[Перейти.](./TEST-PLAN.MD)

## Инструмент для написания тестов и обоснование
Для написания тестов выбраны следующие иструменты:
- язык **Java**
  - на данный момент самый популярный язык в [мире](https://www.tiobe.com/tiobe-index/) с отличной документацией, большим комьюнити
  - один из самых распространенных языков для тестирования
  - кроссплатформенный
  - быстрый
  - его знаю я
- библиотека **Rest-assured**
  - простой, легко-читаемый код
  - поддержка конструкции Given-When-Then - парадигма BDD
  - поддержка валидации JSON
  - быстрый
  - прост в освоении
  - REST-запросы любой сложности
- тестовый фреймворк TestNG
  - мощный фреймворк для написания разных тестов (unit testing, api testing, e2e testing, ui testing, etc)
  - отлично подходит для функционального и регрессионного тестирования и на CI-серверах
  - унаследовал многое у JUnit и добавил свои функции
  - хорошая документация
  - мощное комьюнити
- билдер Maven
  - простая сборка и запуск тестов из командной строки, средствами разработки или на CI-сервере
  - простое управление зависимостями
  - отличная документация
  - огромное комьюнити


## Тесты
### Окружение
Установить:
- [Java Development Kit 8](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) для текущей ОС
- [Maven 3.5.0](https://maven.apache.org/download.cgi) для текущей ОС

### Запуск тестов

- средствами IDE (разработка велась в IntelliJ IDEA)
- из командной строки, в директории с проектом выполнить команду:
`mvn -Dtest=PromotionTests test`, в результате скачаются зависимости,
проект соберется, произойдет прогон тестов
- проект можно запускать средствами CI, например, TeamCity или Jenkins

### Просмотр отчетов о тестах

- средствами IDE
- в консоли будет стек-трейс с результатами тестирования:
  - с количеством запущенных тестов
  - с количеством упавших тестов
  - по упавшим тестам будет видна более подробная информация
- для более удобного просмотра результатов тестирования можно включить
в проект инструмент для просмотра результатов тестирования, например
[Allure Test Report](http://allure.qatools.ru)

### Ошибки, замечания, пожелания к API
В результате тестировани Xsolla Promotion REST API произведено позитивное
тестирование всех API в разделе.
Выявлены ошибки:
- не проходит тест API - Toggle the promotion, запрос в соотвестивии
с документацией возвращает ошибку - 415 "Request body format '' not supported",
ошибки либо в документации, либо на стороне сервера

- не проходит тест API - Set the subject of the promotion, запрос
в соотвестивии с документацией возвращает ошибку - 422 "An error has
occurred while processing your request, make sure your data is valid",
на сервер передаются невалидные данные, ошибка на стороне сервера,
либо в документации

- не проходит тест API - Set the rewards to the promotion, запрос
в соотвестивии с документацией возвращает ошибку -
422 "An error has occurred while processing your request, make sure your data is valid",
на сервер передаются невалидные данные, ошибка на стороне сервера,
либо в документации
